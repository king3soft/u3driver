<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hello U3Driver</title>
    <meta name="generator" content="VuePress 1.8.0">
    
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.d39084ab.css" as="style"><link rel="preload" href="/assets/js/app.2579e4e6.js" as="script"><link rel="preload" href="/assets/js/2.d8efb58f.js" as="script"><link rel="preload" href="/assets/js/7.c7f3b8e8.js" as="script"><link rel="prefetch" href="/assets/js/3.9f41a7be.js"><link rel="prefetch" href="/assets/js/4.865692a8.js"><link rel="prefetch" href="/assets/js/5.81254301.js"><link rel="prefetch" href="/assets/js/6.6e8c67be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d39084ab.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" aria-current="page" class="home-link router-link-exact-active router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="hello-u3driver"><a href="#hello-u3driver" class="header-anchor">#</a> Hello U3Driver</h1> <h1 id="uauto"><a href="#uauto" class="header-anchor">#</a> UAuto</h1> <h2 id="安装方法"><a href="#安装方法" class="header-anchor">#</a> 安装方法</h2> <h3 id="unity-插件接入"><a href="#unity-插件接入" class="header-anchor">#</a> Unity 插件接入</h3> <ol><li>将 <code>UAutoSDK.dll</code> 和 <code>UAutoSdkInit.cs</code> 添加到 <code>/Assets/Plugins</code> 目录下</li> <li>在场景中新建物体并将 <code>UAutoSdkInit.cs</code> 添加到物体中、或者直接将脚本添加到已有游戏物体上。</li> <li>运行游戏后如果出现如下 log 说明配置成功</li></ol> <p><img src="doc/20200728152128499_28920.png" alt=""></p> <h3 id="python-环境配置"><a href="#python-环境配置" class="header-anchor">#</a> python 环境配置</h3> <p><a href="http://gitlab.testplus.cn/leijiafeng/UAuto_python" target="_blank" rel="noopener noreferrer">项目地址<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>clone 使用命令行进入到 <code>UAuto_python</code> 目录，运行下面的指令安装所需模块</p> <blockquote><p>pip install -r requirements.txt</p></blockquote> <p>等待安装完成后开始运行：</p> <ol><li>在本机 Unity 中运行游戏，开启网络监听</li> <li>运行 <code>temp_test.py</code> 脚本，命令如下：</li></ol> <blockquote><p>python temp_test.py -i 127.0.0.1</p></blockquote> <p>如果 python 脚本输出如下表示 python 环境配置完成</p> <p><img src="doc/20200728160803326_6614.png" alt=""></p> <h2 id="python-api"><a href="#python-api" class="header-anchor">#</a> Python API</h2> <p>为了解释后面的功能，这里对游戏物体的<code>路径</code>进行说明，假如有下面游戏场景</p> <p><img src="doc/20200730113324516_6376.png" alt=""></p> <p><code>Button</code> 的路径为 <code>/Canvas/Button</code></p> <h3 id="通用功能"><a href="#通用功能" class="header-anchor">#</a> 通用功能</h3> <h5 id="altrununitydriver"><a href="#altrununitydriver" class="header-anchor">#</a> AltrunUnityDriver</h5> <p>初始化 UDriver</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token keyword">from</span> u3driver <span class="token keyword">import</span> AltrunUnityDriver

udriver <span class="token operator">=</span> AltrunUnityDriver<span class="token punctuation">(</span>device_s<span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> ip<span class="token punctuation">,</span> TCP_PORT<span class="token operator">=</span><span class="token number">13000</span><span class="token punctuation">,</span> <span class="token punctuation">,</span>timeout<span class="token operator">=</span><span class="token number">60</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>device_s：安卓设备号</li> <li>platform：平台，直接传空字符串</li> <li>ip：启动游戏机器的 ip 地址</li> <li>TCP_PORT：端口号</li> <li>timeout：超时重试时间</li></ul> <h5 id="stop"><a href="#stop" class="header-anchor">#</a> stop</h5> <p>与 Unity 部分断开连接</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>stop<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="debug-mode"><a href="#debug-mode" class="header-anchor">#</a> debug_mode</h5> <p>使用 debugMode 可以直接录制和翻译简单的 UI 事件
目前已支持下面几种录制：</p> <ul><li>点击</li> <li>拖动</li> <li>文本输入</li></ul> <p>开始录制后，在游戏中执行 UI 操作会试试转化成 python 指令。当操作完成后按住屏幕 5 秒结束录制。</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>debug_mode<span class="token punctuation">(</span><span class="token string">&quot;output_script.py&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="get-screen"><a href="#get-screen" class="header-anchor">#</a> get_screen</h5> <p>获取游戏内屏幕宽高（不一定等于屏幕宽高）</p> <div class="language-python extra-class"><pre class="language-python"><code>width<span class="token punctuation">,</span> height <span class="token operator">=</span> udriver<span class="token punctuation">.</span>get_screen<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>file_path：输出的脚本名</li></ul> <h5 id="get-png-screenshot"><a href="#get-png-screenshot" class="header-anchor">#</a> get_png_screenshot</h5> <p>对游戏进行截图</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>get_png_screenshot<span class="token punctuation">(</span><span class="token string">&quot;pic.jpg&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>path：保存图片名</li></ul> <h4 id="获取游戏物体"><a href="#获取游戏物体" class="header-anchor">#</a> 获取游戏物体</h4> <h5 id="find-object"><a href="#find-object" class="header-anchor">#</a> find_object</h5> <p>寻找场景内路径为 value 的游戏对象并返回 Handler，且只会找到活动（active）的游戏对象。如果没有找到对应游戏对象，将会抛出异常。</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//Button&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>by：通过什么方式进行寻找，如 By.PATH 表示按照路径进行寻找</li> <li>value：需要寻找的游戏对象的路径</li></ul> <p>如果游戏物体路径存在 <code>/</code> 符号，例如按钮的名称为 <code>Button/1</code>，可以使用 <code>By.LEVEL</code> 进行获取：</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>LEVEL<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//Button/1&quot;</span>
</code></pre></div><h5 id="find"><a href="#find" class="header-anchor">#</a> find</h5> <p>在 <code>find_object</code> 返回的已找到的游戏对象 Handler 为基础，进行级联查找，且只会找到活动（active）的游戏对象，同样返回找到的游戏对象 Handler。</p> <div class="language-python extra-class"><pre class="language-python"><code>obj <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//A&quot;</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>find<span class="token punctuation">(</span><span class="token string">&quot;B//C&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 相当于</span>
udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;Canvas//A//B//C&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：需要查找的子级对象目录，无需 <code>//</code> 开头。</li></ul> <h5 id="child-index"><a href="#child-index" class="header-anchor">#</a> child_index</h5> <p>在 <code>find_object</code> 返回的已找到的游戏对象 Handler 为基础，获取给定下标的子对象，且只会找到活动（active）的游戏对象，同样返回找到的游戏对象 Handler。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 当子对象名字重复，使用该函数查找</span>
obj <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//Parent&quot;</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>child_index<span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：子级对象的下标，从 0 开始。</li></ul> <h5 id="parent"><a href="#parent" class="header-anchor">#</a> parent</h5> <p>在 <code>find_object</code> 返回的已找到的游戏对象 Handler 为基础，获取父对象，且只会找到活动（active）的游戏对象，同样返回找到的游戏对象 Handler。</p> <div class="language-python extra-class"><pre class="language-python"><code>obj <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//A//B&quot;</span><span class="token punctuation">)</span>
obj<span class="token punctuation">.</span>parent<span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment"># 相当于</span>
udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//A&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="find-object-which-contains"><a href="#find-object-which-contains" class="header-anchor">#</a> find_object_which_contains</h5> <p>寻找所有名字包含 value 且活动（active）的游戏对象，返回的列表中包含所有找到的游戏对象。</p> <div class="language-python extra-class"><pre class="language-python"><code>ret <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object_which_contains<span class="token punctuation">(</span><span class="token string">&quot;gameObjectName&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：需要寻找的游戏对象的名字或名字一部分</li></ul> <h5 id="find-object-in-range-where-name-contains"><a href="#find-object-in-range-where-name-contains" class="header-anchor">#</a> find_object_in_range_where_name_contains</h5> <p>在指定的路径下寻找名字包含 <code>value</code> 且活动（active）的直接子游戏对象，返回的列表中包含所有找到的游戏对象。</p> <div class="language-python extra-class"><pre class="language-python"><code>ret <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object_in_range_where_name_contains<span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//parentName&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：需要寻找的游戏对象的名字或名字一部分</li> <li>range_path：需要寻找的游戏对象的直接父级的路径</li></ul> <h5 id="object-exise"><a href="#object-exise" class="header-anchor">#</a> object_exise</h5> <p>判断物体是否存在且活动（active）。</p> <div class="language-python extra-class"><pre class="language-python"><code>exist <span class="token operator">=</span> udriver<span class="token punctuation">.</span>object_exise<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//name&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>by：通过什么方式寻找游戏对象，目前只支持 <code>by.PATH</code> 通过路径进行寻找</li> <li>value：需要判断的物体的路径</li></ul> <h5 id="find-object-in-range-where-text-contains"><a href="#find-object-in-range-where-text-contains" class="header-anchor">#</a> find_object_in_range_where_text_contains</h5> <p>在父游戏物体的直接子级物体下的指定路径寻找文本内容包含 <code>value</code> 且活动（active）的游戏物体，返回的列表中包含所有找到的游戏物体。</p> <div class="language-python extra-class"><pre class="language-python"><code>ret <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object_in_range_where_text_contains<span class="token punctuation">(</span><span class="token string">&quot;childPath&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;value&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;parentPath&quot;</span><span class="token punctuation">)</span>

<span class="token comment"># 可以找到如下的游戏物体：</span>
<span class="token comment"># /parentPath/1/childPath</span>
<span class="token comment"># /parentPath/2/childPath</span>
<span class="token comment"># /parentPath/3/childPath</span>
</code></pre></div><p>参数列表：</p> <ul><li>childPath：子游戏对象的路径（与父游戏对象不是直接父子级关系，中间隔了一层）</li> <li>value：需要包含的文本字符串</li> <li>parentPath：父游戏对象的路径</li></ul> <h5 id="find-child"><a href="#find-child" class="header-anchor">#</a> find_child</h5> <p>获取一个父游戏物体的所有直接子游戏物体的名字。</p> <div class="language-python extra-class"><pre class="language-python"><code>childs <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_child<span class="token punctuation">(</span><span class="token string">&quot;//Canvas//parentName&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：父游戏物体的层级目录</li></ul> <h5 id="get-object-rect"><a href="#get-object-rect" class="header-anchor">#</a> get_object_rect</h5> <p>获取一个 UI 矩形的中心点和四个顶点的屏幕坐标。</p> <div class="language-python extra-class"><pre class="language-python"><code>ret <span class="token operator">=</span> udriver<span class="token punctuation">.</span>get_object_rect<span class="token punctuation">(</span><span class="token string">&quot;//Canvas//name&quot;</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">'Center'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">'BottomLeft'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">'TopLeft'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">'TopRight'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
<span class="token keyword">print</span><span class="token punctuation">(</span>ret<span class="token punctuation">[</span><span class="token string">'BottomRight'</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：游戏物体的路径</li></ul> <h5 id="find-all-objects"><a href="#find-all-objects" class="header-anchor">#</a> find_all_objects</h5> <p>获取一个物体下的所有子孙级物体，返回的列表中包含所有找到的游戏对象。</p> <div class="language-python extra-class"><pre class="language-python"><code>objects <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_all_objects<span class="token punctuation">(</span><span class="token string">&quot;//Canvas&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：游戏物体的路径</li></ul> <h5 id="find-all-objects-where-text-contains"><a href="#find-all-objects-where-text-contains" class="header-anchor">#</a> find_all_objects_where_text_contains</h5> <p>获取所有 text 包含对应文本的游戏物体，该游戏物体必须拥有 <code>Text</code> 或 <code>InputField</code> 组件，返回的列表中包含所有找到的游戏对象。</p> <div class="language-python extra-class"><pre class="language-python"><code>objects <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_all_objects_where_text_contains<span class="token punctuation">(</span><span class="token string">&quot;text&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h4 id="ui-操作"><a href="#ui-操作" class="header-anchor">#</a> UI 操作</h4> <h5 id="tap"><a href="#tap" class="header-anchor">#</a> tap</h5> <p>对游戏对象发起点击事件</p> <div class="language-python extra-class"><pre class="language-python"><code>button <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//Button&quot;</span><span class="token punctuation">)</span>
button<span class="token punctuation">.</span>tap<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="get-text"><a href="#get-text" class="header-anchor">#</a> get_text</h5> <p>获取游戏对象的 <code>text</code> 属性，该游戏对象必须拥有 <code>Text</code> 或 <code>InputField</code> 组件。</p> <div class="language-python extra-class"><pre class="language-python"><code>text <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//Text&quot;</span><span class="token punctuation">)</span>
<span class="token builtin">str</span> <span class="token operator">=</span> text<span class="token punctuation">.</span>get_text<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="set-text"><a href="#set-text" class="header-anchor">#</a> set_text</h5> <p>给游戏对象的 <code>text</code> 属性设置值，该游戏对象必须拥有 <code>InputField</code> 组件。</p> <div class="language-python extra-class"><pre class="language-python"><code>text <span class="token operator">=</span> udriver<span class="token punctuation">.</span>find_object<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//Text&quot;</span><span class="token punctuation">)</span>
<span class="token builtin">str</span> <span class="token operator">=</span> text<span class="token punctuation">.</span>set_text<span class="token punctuation">(</span><span class="token string">'this is text'</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>value：设置文本的字符串</li></ul> <h5 id="find-object-and-tap"><a href="#find-object-and-tap" class="header-anchor">#</a> find_object_and_tap</h5> <p>寻找游戏物体，如果找到且是活动（active）的，对游戏对象发起一次点击事件。</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>find_object_and_tap<span class="token punctuation">(</span>By<span class="token punctuation">.</span>PATH<span class="token punctuation">,</span> <span class="token string">&quot;//Canvas//Button&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>by：通过什么方式寻找游戏对象，目前只支持通过路径进行寻找</li> <li>value：需要寻找的游戏对象</li></ul> <h5 id="tap-at-coordinates"><a href="#tap-at-coordinates" class="header-anchor">#</a> tap_at_coordinates</h5> <p>对屏幕上指定一点的 UI 触发点击事件。</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 屏幕坐标(480, 720)</span>
udriver<span class="token punctuation">.</span>tap_at_coordiates<span class="token punctuation">(</span><span class="token string">&quot;480&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;720&quot;</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="get-value-on-component"><a href="#get-value-on-component" class="header-anchor">#</a> get_value_on_component</h5> <p>获取一个游戏物体中指定的组件上的指定值。</p> <div class="language-python extra-class"><pre class="language-python"><code>ret <span class="token operator">=</span> udriver<span class="token punctuation">.</span>get_value_on_component<span class="token punctuation">(</span><span class="token string">&quot;//Canvas//Image&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;Image&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;color&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>path：游戏物体的路径</li> <li>component_name：组件名</li> <li>value_name：属性名</li></ul> <h5 id="drag-object"><a href="#drag-object" class="header-anchor">#</a> drag_object</h5> <p>对 UI 控件触发拖动事件</p> <div class="language-python extra-class"><pre class="language-python"><code><span class="token comment"># 从 UI 控件中心点开始拖动到 (400, 200)</span>
udriver<span class="token punctuation">.</span>drag_object<span class="token punctuation">(</span><span class="token string">&quot;//Canvas//Slider&quot;</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>

<span class="token comment"># 从 (400, 100) 拖动 UI 到 (400, 200)</span>
udriver<span class="token punctuation">.</span>drag_object<span class="token punctuation">(</span><span class="token string">&quot;//Canvas//Slider&quot;</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="项目接口"><a href="#项目接口" class="header-anchor">#</a> 项目接口</h3> <h5 id="ubox"><a href="#ubox" class="header-anchor">#</a> ubox</h5> <p>开启、关闭 ubox 数据采集</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>ubox<span class="token punctuation">(</span><span class="token string">'2'</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="move-to"><a href="#move-to" class="header-anchor">#</a> move_to</h5> <p>移动到指定坐标点</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>move_to<span class="token punctuation">(</span>x<span class="token punctuation">,</span> y<span class="token punctuation">,</span> z<span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>x：x 坐标</li> <li>y：y 坐标</li> <li>z：z 坐标</li></ul> <h5 id="is-auto-path"><a href="#is-auto-path" class="header-anchor">#</a> is_auto_path</h5> <p>判断当前是否正在自动寻路</p> <div class="language-python extra-class"><pre class="language-python"><code>ret <span class="token operator">=</span> udriver<span class="token punctuation">.</span>is_auto_path<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="get-plr-pos"><a href="#get-plr-pos" class="header-anchor">#</a> get_plr_pos</h5> <p>获取角色当前场景 ID 以及坐标点</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>get_plr_pos<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="goto-scene"><a href="#goto-scene" class="header-anchor">#</a> goto_scene</h5> <p>去到指定场景</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>goto_scene<span class="token punctuation">(</span><span class="token string">&quot;1001&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>id:模板ID，详情可以参考 <code>scenelist.txt</code></li></ul> <h5 id="auto-fight"><a href="#auto-fight" class="header-anchor">#</a> auto_fight</h5> <p>开启自动战斗</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>auto_fight<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="goto-fuben"><a href="#goto-fuben" class="header-anchor">#</a> goto_fuben</h5> <p>去到指定副本</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>goto_fuben<span class="token punctuation">(</span><span class="token string">&quot;1022&quot;</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>id:模板ID，详情可以参考 <code>scenelist.txt</code></li></ul> <h5 id="add-exp"><a href="#add-exp" class="header-anchor">#</a> add_exp</h5> <p>为角色增加经验值</p> <div class="language-python extra-class"><pre class="language-python"><code>udriver<span class="token punctuation">.</span>add_exp<span class="token punctuation">(</span><span class="token number">100000000</span><span class="token punctuation">)</span>
</code></pre></div><p>参数列表：</p> <ul><li>exp:需要增加的经验值</li></ul> <h2 id="已完成的案例"><a href="#已完成的案例" class="header-anchor">#</a> 已完成的案例</h2> <p>跑图，场景切换，门派选择，捏脸系统，UI遍历，小队野外挂机</p> <h3 id="运行参数"><a href="#运行参数" class="header-anchor">#</a> 运行参数</h3> <p>-s：测试使用的安卓设备号</p> <p>-i: 测试使用的安卓ip地址</p> <p>-b：性能采集类型，0：使用 Ubox 采集，1：使用 TestPlus 采集，其他数字：不采集</p> <p>-t：是否跳过安装新包：0：安装新包，1：跳过安装（建议提前在机器上安装好新包，自动装包需要机器配置好相关环境，这一步比较麻烦）</p> <p>-a：新包的下载地址</p> <p>-user：使用的账号</p> <p>-server：使用的服务器</p> <p>-package：使用的包名</p> <h3 id="跑图"><a href="#跑图" class="header-anchor">#</a> 跑图</h3> <p>游戏准备：准备一个已经过好新手教程的账号</p> <p>运行方法：</p> <blockquote><p>python map_test.py -s &quot;安卓设备号&quot; -t 1 -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;
或
python map_test.py -s &quot;安卓设备号&quot; -t 1 -i &quot;ip地址&quot; -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;</p></blockquote> <h3 id="场景切换"><a href="#场景切换" class="header-anchor">#</a> 场景切换</h3> <p>游戏准备：准备一个已经过好新手教程的账号</p> <p>运行方法：</p> <blockquote><p>python switch_scene_test.py -s &quot;安卓设备号&quot; -t 1 -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;
或
python switch_scene_test.py -s &quot;安卓设备号&quot; -t 1 -i &quot;ip地址&quot; -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;</p></blockquote> <h3 id="门派选择"><a href="#门派选择" class="header-anchor">#</a> 门派选择</h3> <p>运行方法：</p> <blockquote><p>python create_role_test.py -s &quot;安卓设备号&quot; -t 1 -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -package &quot;com.sea.jxsj3.xsj&quot;
或
python create_role_test.py -s &quot;安卓设备号&quot; -t 1 -i &quot;ip地址&quot; -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;</p></blockquote> <h3 id="捏脸系统"><a href="#捏脸系统" class="header-anchor">#</a> 捏脸系统</h3> <p>运行方法：</p> <blockquote><p>python role_face_test.py -s &quot;安卓设备号&quot; -t 1 -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -package &quot;com.sea.jxsj3.xsj&quot;
或
python role_face_test.py -s &quot;安卓设备号&quot; -t 1 -i &quot;ip地址&quot; -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;</p></blockquote> <h3 id="ui遍历"><a href="#ui遍历" class="header-anchor">#</a> UI遍历</h3> <p>游戏准备：准备一个已经升满级的账号</p> <p>运行方法：</p> <blockquote><p>python ui_traverse_test.py -s &quot;安卓设备号&quot; -t 1 -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;
或
python ui_traverse_test.py -s &quot;安卓设备号&quot; -t 1 -i &quot;ip地址&quot; -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;</p></blockquote> <h3 id="小队野外挂机"><a href="#小队野外挂机" class="header-anchor">#</a> 小队野外挂机</h3> <p>游戏准备：准备4个已经升满级的账号，起始位置在20级异化蝎子</p> <p>运行方法：</p> <blockquote><p>python fight_test.py -s &quot;安卓设备号&quot; -t 1 -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;
或
python fight_test.py -s &quot;安卓设备号&quot; -t 1 -i &quot;ip地址&quot; -a &quot;http://10.11.88.13:8088/jxsj.apk&quot; -b 2 -user &quot;cs&quot; -server 50 -package &quot;com.sea.jxsj3.xsj&quot;</p></blockquote></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2579e4e6.js" defer></script><script src="/assets/js/2.d8efb58f.js" defer></script><script src="/assets/js/7.c7f3b8e8.js" defer></script>
  </body>
</html>
